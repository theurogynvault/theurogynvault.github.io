<!-- Load custom CSS (ensures it's included on every page) -->
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<div class="h2-dropdown-container">
  <button id="h2DropdownBtn">Sections âŒ„</button>
  <ul id="h2DropdownMenu"></ul>
</div>


<!-- ðŸŒ™ Dark/Light Mode: robust injector + persistence -->
<script>
/*
  Robust toggle:
  - Applies saved theme (light/dark) on load
  - Injects #theme-toggle if it's missing
  - Fixed-position FAB-style button (styled in custom.css)
*/
(function() {
  function applySavedTheme() {
    try {
      var saved = localStorage.getItem('theme');
      if (saved === 'dark') {
        document.body.classList.add('dark-mode');
      }
    } catch (e) {}
  }

  function ensureToggleExists() {
    var btn = document.getElementById('theme-toggle');
    if (!btn) {
      btn = document.createElement('div');
      btn.id = 'theme-toggle';
      btn.setAttribute('role', 'button');
      btn.setAttribute('aria-label', 'Toggle dark mode');
      btn.textContent = 'ðŸŒ“';
      document.body.appendChild(btn);
    }
    return btn;
  }

  function wireToggle(btn) {
    btn.addEventListener('click', function() {
      document.body.classList.toggle('dark-mode');
      var isDark = document.body.classList.contains('dark-mode');
      try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(e) {}
    });
  }

  // Wait for DOM, then apply theme and insert/wire button
  document.addEventListener('DOMContentLoaded', function() {
    applySavedTheme();
    var btn = ensureToggleExists();
    wireToggle(btn);
  });
})();
</script>


<ul id="vault-dropdown" class="vault-dropdown-menu">
  <!-- dynamically inserted H2s go here -->
</ul>
